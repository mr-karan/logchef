import{c as J,o as p,a as x,b as g,r as v,n as S,u as e,d as b,e as ue,x as A,f as q,w as a,g as G,h as H,Z as ie,i as k,j as l,_ as ce,C as pe,m as B,U as fe,X as me,k as ye,I as D,S as ge,l as ve,p as $,q as se,s as _e,t as be,v as xe,y as he,z as qe,A as $e,B as we,F as Se,D as Te,V as ke,K as Ce,E as Ve,G as Be,H as De,J as Ne,L as Pe,M as Ue,Y as Le,N as oe,O as m,P as ne,Q as re,R as V,T as Oe,W as T,$ as L,a0 as je}from"./index-C1PlB8WA.js";/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=J("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=J("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=J("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),F="/api",M={async fetchSources(){const t=await fetch(`${F}/sources`);if(!t.ok)throw new Error("Failed to fetch sources");const s=await t.json();return s.data=s.data||[],s},async deleteSource(t){const s=await fetch(`${F}/sources/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),o=await s.text();if(!s.ok){const r=o?JSON.parse(o):{};throw new Error(r.message||"Failed to delete source")}return o},async updateSourceTTL(t,s){const o=await fetch(`${F}/sources/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ttl_days:s})});if(!o.ok)throw new Error("Failed to update TTL");return o.json()}},Ae={class:"relative w-full overflow-auto"},Ie={__name:"Table",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("div",Ae,[g("table",{class:S(e(b)("w-full caption-bottom text-sm",s.class))},[v(o.$slots,"default")],2)]))}},Fe={__name:"TableBody",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("tbody",{class:S(e(b)("[&_tr:last-child]:border-0",s.class))},[v(o.$slots,"default")],2))}},N={__name:"TableCell",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("td",{class:S(e(b)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s.class))},[v(o.$slots,"default")],2))}},ae={__name:"TableRow",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("tr",{class:S(e(b)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s.class))},[v(o.$slots,"default")],2))}},P={__name:"TableHead",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("th",{class:S(e(b)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s.class))},[v(o.$slots,"default")],2))}},Me={__name:"TableHeader",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("thead",{class:S(e(b)("[&_tr]:border-b",s.class))},[v(o.$slots,"default")],2))}},le={__name:"Badge",props:{variant:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("div",{class:S(e(b)(e(Je)({variant:t.variant}),s.class))},[v(o.$slots,"default")],2))}},Je=ue("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),R={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:s}){const n=A(t,s);return(d,f)=>(p(),q(e(ie),G(H(e(n))),{default:a(()=>[v(d.$slots,"default")]),_:3},16))}},K={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:s}){const o=t,r=s,n=k(()=>{const{class:f,...y}=o;return y}),d=A(n,r);return(f,y)=>(p(),q(e(ye),null,{default:a(()=>[l(e(ce),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),l(e(pe),B(e(d),{class:e(b)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o.class)}),{default:a(()=>[v(f.$slots,"default"),l(e(fe),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:a(()=>[l(e(me),{class:"w-4 h-4"}),y[0]||(y[0]=g("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},Ge={__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:n,...d}=s;return d}),r=D(o);return(n,d)=>(p(),q(e(ge),B(e(r),{class:e(b)("text-sm text-muted-foreground",s.class)}),{default:a(()=>[v(n.$slots,"default")]),_:3},16,["class"]))}},W={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("div",{class:S(e(b)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",s.class))},[v(o.$slots,"default")],2))}},Y={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),x("div",{class:S(e(b)("flex flex-col gap-y-1.5 text-center sm:text-left",s.class))},[v(o.$slots,"default")],2))}},X={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:n,...d}=s;return d}),r=D(o);return(n,d)=>(p(),q(e(ve),B(e(r),{class:e(b)("text-lg font-semibold leading-none tracking-tight",s.class)}),{default:a(()=>[v(n.$slots,"default")]),_:3},16,["class"]))}};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const He=t=>typeof t<"u";function Re(t){return JSON.parse(JSON.stringify(t))}function Ke(t,s,o,r={}){var n,d,f;const{clone:y=!1,passive:c=!1,eventName:u,deep:h=!1,defaultValue:i,shouldEmit:_}=r,C=_e(),Z=o||(C==null?void 0:C.emit)||((n=C==null?void 0:C.$emit)==null?void 0:n.bind(C))||((f=(d=C==null?void 0:C.proxy)==null?void 0:d.$emit)==null?void 0:f.bind(C==null?void 0:C.proxy));let j=u;j=j||`update:${s.toString()}`;const Q=w=>y?typeof y=="function"?y(w):Re(w):w,ee=()=>He(t[s])?Q(t[s]):i,te=w=>{_?_(w)&&Z(j,w):Z(j,w)};if(c){const w=ee(),I=$(w);let E=!1;return se(()=>t[s],z=>{E||(E=!0,I.value=Q(z),be(()=>E=!1))}),se(I,z=>{!E&&(z!==t[s]||h)&&te(z)},{deep:h}),I}else return k({get(){return ee()},set(w){te(w)}})}const O={__name:"Input",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(t,{emit:s}){const o=t,n=Ke(o,"modelValue",s,{passive:!0,defaultValue:o.defaultValue});return(d,f)=>xe((p(),x("input",{"onUpdate:modelValue":f[0]||(f[0]=y=>qe(n)?n.value=y:null),class:S(e(b)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o.class))},null,2)),[[he,e(n)]])}},U={__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:r,...n}=s;return n});return(r,n)=>(p(),q(e($e),B(o.value,{class:e(b)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s.class)}),{default:a(()=>[v(r.$slots,"default")]),_:3},16,["class"]))}},We={__name:"Select",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:String,required:!1},modelValue:{type:String,required:!1},dir:{type:String,required:!1},name:{type:String,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(t,{emit:s}){const n=A(t,s);return(d,f)=>(p(),q(e(we),G(H(e(n))),{default:a(()=>[v(d.$slots,"default")]),_:3},16))}},Ye=Object.assign({inheritAttrs:!1},{__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1,default:"popper"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:s}){const o=t,r=s,n=k(()=>{const{class:f,...y}=o;return y}),d=A(n,r);return(f,y)=>(p(),q(e(ke),null,{default:a(()=>[l(e(Se),B({...e(d),...f.$attrs},{class:e(b)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o.class)}),{default:a(()=>[l(e(et)),l(e(Te),{class:S(e(b)("p-1",t.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:a(()=>[v(f.$slots,"default")]),_:3},8,["class"]),l(e(Qe))]),_:3},16,["class"])]),_:3}))}}),Xe={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Ze={__name:"SelectItem",props:{value:{type:String,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:n,...d}=s;return d}),r=D(o);return(n,d)=>(p(),q(e(Be),B(e(r),{class:e(b)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s.class)}),{default:a(()=>[g("span",Xe,[l(e(Ce),null,{default:a(()=>[l(e(Ee),{class:"h-4 w-4"})]),_:1})]),l(e(Ve),null,{default:a(()=>[v(n.$slots,"default")]),_:3})]),_:3},16,["class"]))}},Qe={__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:n,...d}=s;return d}),r=D(o);return(n,d)=>(p(),q(e(De),B(e(r),{class:e(b)("flex cursor-default items-center justify-center py-1",s.class)}),{default:a(()=>[v(n.$slots,"default",{},()=>[l(e(de),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},et={__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:n,...d}=s;return d}),r=D(o);return(n,d)=>(p(),q(e(Ne),B(e(r),{class:e(b)("flex cursor-default items-center justify-center py-1",s.class)}),{default:a(()=>[v(n.$slots,"default",{},()=>[l(e(ze),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},tt={__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,o=k(()=>{const{class:n,...d}=s;return d}),r=D(o);return(n,d)=>(p(),q(e(Ue),B(e(r),{class:e(b)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",s.class)}),{default:a(()=>[v(n.$slots,"default"),l(e(Pe),{"as-child":""},{default:a(()=>[l(e(de),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}},st={__name:"SelectValue",props:{placeholder:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=t;return(o,r)=>(p(),q(e(Le),G(H(s)),{default:a(()=>[v(o.$slots,"default")]),_:3},16))}},at={class:"space-y-2"},lt={class:"space-y-2"},ot={class:"space-y-2"},nt={class:"space-y-2"},rt={__name:"AddSourceDialog",props:{open:Boolean},emits:["update:open"],setup(t,{emit:s}){const o=s,r=$({name:"",schema_type:"",dsn:"",ttl_days:90}),n=[{value:"http",label:"HTTP Logs"},{value:"application",label:"Application Logs"}],{toast:d}=oe(),f=async()=>{try{const y=await fetch("/api/sources",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.value)}),c=await y.json();if(!y.ok)throw new Error(c.message||"Failed to create source");d({title:"Success",description:"Source created successfully"}),o("update:open",!1),o("source-added")}catch(y){d({variant:"destructive",title:"Error",description:y.message}),console.error("Error creating source:",y)}};return(y,c)=>(p(),q(e(R),{open:t.open,"onUpdate:open":c[4]||(c[4]=u=>y.$emit("update:open",u))},{default:a(()=>[l(e(K),{class:"sm:max-w-[425px]"},{default:a(()=>[l(e(Y),null,{default:a(()=>[l(e(X),null,{default:a(()=>c[5]||(c[5]=[m("Add New Source")])),_:1})]),_:1}),g("form",{onSubmit:Oe(f,["prevent"]),class:"space-y-4"},[g("div",at,[l(e(U),{for:"name"},{default:a(()=>c[6]||(c[6]=[m("Name")])),_:1}),l(e(O),{id:"name",modelValue:r.value.name,"onUpdate:modelValue":c[0]||(c[0]=u=>r.value.name=u),placeholder:"my-nginx-logs",required:"",minlength:"4",maxlength:"30"},null,8,["modelValue"])]),g("div",lt,[l(e(U),{for:"schema-type"},{default:a(()=>c[7]||(c[7]=[m("Schema Type")])),_:1}),l(e(We),{modelValue:r.value.schema_type,"onUpdate:modelValue":c[1]||(c[1]=u=>r.value.schema_type=u),required:""},{default:a(()=>[l(e(tt),null,{default:a(()=>[l(e(st),{placeholder:"Select schema type"})]),_:1}),l(e(Ye),null,{default:a(()=>[(p(),x(re,null,ne(n,u=>l(e(Ze),{key:u.value,value:u.value},{default:a(()=>[m(T(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),g("div",ot,[l(e(U),{for:"dsn"},{default:a(()=>c[8]||(c[8]=[m("DSN")])),_:1}),l(e(O),{id:"dsn",modelValue:r.value.dsn,"onUpdate:modelValue":c[2]||(c[2]=u=>r.value.dsn=u),placeholder:"clickhouse://localhost:9000/logs",required:""},null,8,["modelValue"])]),g("div",nt,[l(e(U),{for:"ttl"},{default:a(()=>c[9]||(c[9]=[m("TTL (days)")])),_:1}),l(e(O),{id:"ttl",type:"number",modelValue:r.value.ttl_days,"onUpdate:modelValue":c[3]||(c[3]=u=>r.value.ttl_days=u)},null,8,["modelValue"])]),l(e(W),null,{default:a(()=>[l(e(V),{type:"submit",class:"w-full"},{default:a(()=>c[10]||(c[10]=[m("Create Source")])),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]))}},dt={class:"py-4"},ut={class:"space-y-4"},it={class:"space-y-2"},ct={key:0,class:"text-red-500 text-sm"},pt={__name:"UpdateTTLDialog",props:{open:Boolean,sourceId:String,sourceName:String},emits:["update:open","ttl-updated"],setup(t,{emit:s}){const o=t,r=s,n=$(""),d=$(!1),f=$(""),y=async()=>{if(!n.value||isNaN(n.value)||n.value<=0){f.value="Please enter a valid number of days";return}try{d.value=!0,await M.updateSourceTTL(o.sourceId,parseInt(n.value)),r("ttl-updated"),r("update:open",!1)}catch(c){f.value=c.message}finally{d.value=!1}};return(c,u)=>(p(),q(e(R),{open:t.open,"onUpdate:open":u[2]||(u[2]=h=>c.$emit("update:open",h))},{default:a(()=>[l(e(K),null,{default:a(()=>[l(e(Y),null,{default:a(()=>[l(e(X),null,{default:a(()=>[m("Update TTL for "+T(t.sourceName),1)]),_:1})]),_:1}),g("div",dt,[g("div",ut,[g("div",it,[l(e(U),null,{default:a(()=>u[3]||(u[3]=[m("TTL (days)")])),_:1}),l(e(O),{type:"number",modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=h=>n.value=h),placeholder:"Enter number of days",disabled:d.value},null,8,["modelValue","disabled"])]),f.value?(p(),x("div",ct,T(f.value),1)):L("",!0)])]),l(e(W),null,{default:a(()=>[l(e(V),{variant:"outline",onClick:u[1]||(u[1]=h=>c.$emit("update:open",!1)),disabled:d.value},{default:a(()=>u[4]||(u[4]=[m(" Cancel ")])),_:1},8,["disabled"]),l(e(V),{onClick:y,loading:d.value},{default:a(()=>u[5]||(u[5]=[m(" Update TTL ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]))}},ft={class:"py-4"},mt={class:"space-y-4"},yt={class:"space-y-2"},gt={class:"text-sm text-muted-foreground"},vt={class:"font-semibold"},_t={key:0,class:"text-red-500 text-sm"},bt={__name:"DeleteSourceDialog",props:{open:Boolean,source:Object},emits:["update:open","confirm"],setup(t,{emit:s}){const o=t,r=s,n=$(""),d=$(!1),f=$(""),y=async()=>{if(n.value!==o.source.Name){f.value="Please type the source name exactly to confirm deletion";return}d.value=!0,r("confirm"),d.value=!1,n.value="",f.value=""};return(c,u)=>(p(),q(e(R),{open:t.open,"onUpdate:open":u[2]||(u[2]=h=>c.$emit("update:open",h))},{default:a(()=>[l(e(K),null,{default:a(()=>{var h;return[l(e(Y),null,{default:a(()=>[l(e(X),{class:"text-destructive"},{default:a(()=>u[3]||(u[3]=[m("Delete Source")])),_:1}),l(e(Ge),null,{default:a(()=>{var i;return[m(' This action cannot be undone. This will permanently delete the source "'+T((i=t.source)==null?void 0:i.Name)+'" and remove all associated data. ',1)]}),_:1})]),_:1}),g("div",ft,[g("div",mt,[g("div",yt,[g("p",gt,[u[4]||(u[4]=m(" Please type ")),g("span",vt,T((h=t.source)==null?void 0:h.Name),1),u[5]||(u[5]=m(" to confirm. "))]),l(e(O),{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=i=>n.value=i),placeholder:"Type source name to confirm",disabled:d.value},null,8,["modelValue","disabled"])]),f.value?(p(),x("div",_t,T(f.value),1)):L("",!0)])]),l(e(W),null,{default:a(()=>{var i;return[l(e(V),{variant:"outline",onClick:u[1]||(u[1]=_=>c.$emit("update:open",!1)),disabled:d.value},{default:a(()=>u[6]||(u[6]=[m(" Cancel ")])),_:1},8,["disabled"]),l(e(V),{variant:"destructive",onClick:y,loading:d.value,disabled:n.value!==((i=t.source)==null?void 0:i.Name)},{default:a(()=>u[7]||(u[7]=[m(" Delete Source ")])),_:1},8,["loading","disabled"])]}),_:1})]}),_:1})]),_:1},8,["open"]))}},xt={class:"container py-8"},ht={class:"mb-8 flex items-center justify-between"},qt={key:0,class:"mb-4 p-4 text-red-500 bg-red-50 rounded-md"},$t={key:1,class:"text-center py-8"},wt={key:2,class:"text-center py-8"},St={class:"max-w-md mx-auto space-y-4"},Tt={key:3,class:"rounded-md border"},Ct={__name:"SourcesView",setup(t){const{toast:s}=oe(),o=$(!1),r=$(!1),n=$(!1),d=$(null),f=$([]),y=$(!0),c=$(null),u=async()=>{try{y.value=!0;const h=await M.fetchSources();f.value=h.data,c.value=null}catch(h){c.value=h.message,console.error("Error fetching sources:",h),f.value=[]}finally{y.value=!1}};return je(()=>{u()}),(h,i)=>(p(),x("div",xt,[g("div",ht,[i[7]||(i[7]=g("div",null,[g("h1",{class:"text-3xl font-semibold tracking-tight"},"Sources"),g("p",{class:"text-sm text-muted-foreground mt-1"},"Manage your log sources and their configurations.")],-1)),l(e(V),{onClick:i[0]||(i[0]=_=>o.value=!0),size:"sm"},{default:a(()=>i[6]||(i[6]=[m(" Add Source ")])),_:1})]),c.value?(p(),x("div",qt,T(c.value),1)):L("",!0),y.value&&!f.value.length?(p(),x("div",$t," Loading sources... ")):f.value.length===0?(p(),x("div",wt,[g("div",St,[i[9]||(i[9]=g("h3",{class:"text-lg font-semibold"},"No sources found",-1)),i[10]||(i[10]=g("p",{class:"text-muted-foreground"},' Get started by adding your first log source. Click the "Add Source" button above to begin collecting and analyzing your logs. ',-1)),l(e(V),{onClick:i[1]||(i[1]=_=>o.value=!0),variant:"outline",class:"mt-4"},{default:a(()=>i[8]||(i[8]=[m(" Add Your First Source ")])),_:1})])])):(p(),x("div",Tt,[l(e(Ie),null,{default:a(()=>[l(e(Me),null,{default:a(()=>[l(e(ae),null,{default:a(()=>[l(e(P),null,{default:a(()=>i[11]||(i[11]=[m("Name")])),_:1}),l(e(P),null,{default:a(()=>i[12]||(i[12]=[m("Type")])),_:1}),l(e(P),null,{default:a(()=>i[13]||(i[13]=[m("Status")])),_:1}),l(e(P),null,{default:a(()=>i[14]||(i[14]=[m("Last Synced")])),_:1}),l(e(P),null,{default:a(()=>i[15]||(i[15]=[m("Actions")])),_:1})]),_:1})]),_:1}),l(e(Fe),null,{default:a(()=>[(p(!0),x(re,null,ne(f.value,_=>(p(),q(e(ae),{key:_.ID},{default:a(()=>[l(e(N),null,{default:a(()=>[m(T(_.Name),1)]),_:2},1024),l(e(N),null,{default:a(()=>[l(e(le),null,{default:a(()=>[m(T(_.SchemaType),1)]),_:2},1024)]),_:2},1024),l(e(N),null,{default:a(()=>[l(e(le),null,{default:a(()=>i[16]||(i[16]=[m("Connected")])),_:1})]),_:1}),l(e(N),null,{default:a(()=>[m(T(new Date(_.UpdatedAt).toLocaleString()),1)]),_:2},1024),l(e(N),{class:"space-x-2"},{default:a(()=>[l(e(V),{variant:"outline",size:"sm",onClick:()=>{d.value=_,r.value=!0}},{default:a(()=>i[17]||(i[17]=[m(" Update TTL ")])),_:2},1032,["onClick"]),l(e(V),{variant:"destructive",size:"sm",onClick:()=>{d.value=_,n.value=!0}},{default:a(()=>i[18]||(i[18]=[m(" Delete ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),l(rt,{open:o.value,"onUpdate:open":i[2]||(i[2]=_=>o.value=_),onSourceAdded:u},null,8,["open"]),d.value?(p(),q(pt,{key:4,open:r.value,"onUpdate:open":i[3]||(i[3]=_=>r.value=_),"source-id":d.value.ID,"source-name":d.value.Name,onTtlUpdated:u},null,8,["open","source-id","source-name"])):L("",!0),d.value?(p(),q(bt,{key:5,open:n.value,"onUpdate:open":i[4]||(i[4]=_=>n.value=_),source:d.value,onConfirm:i[5]||(i[5]=async()=>{try{await e(M).deleteSource(d.value.ID),e(s)({title:"Success",description:"Source deleted successfully"}),n.value=!1,await u()}catch(_){e(s)({title:"Error",description:_.message,variant:"destructive"})}})},null,8,["open","source"])):L("",!0)]))}};export{Ct as default};
