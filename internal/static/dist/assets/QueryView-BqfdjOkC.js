import{_ as $,a as x,b as m,c as w,e as p,f as k,d as h}from"./index-6KFMHKVD.js";import{o as n,i as c,d as s,w as e,u as t,N as u,P as C,O as N,a as g,T as d,f as i,j as S,a0 as T,l as y,$ as L,W as V}from"./index-B6D1KWAQ.js";const B={class:"rounded-md border"},j={class:"flex flex-col"},D={class:"text-xs text-muted-foreground"},E={class:"truncate"},z={__name:"LogTable",props:{data:{type:Array,required:!0}},setup(v){const f=l=>{switch(l.toLowerCase()){case"error":return"bg-red-500";case"warn":return"bg-yellow-500";case"info":return"bg-blue-500";case"debug":return"bg-gray-500";default:return"bg-gray-500"}},_=l=>new Date(l).toLocaleString();return(l,a)=>(n(),c("div",B,[s(t(h),null,{default:e(()=>[s(t($),null,{default:e(()=>[s(t(x),null,{default:e(()=>[s(t(m),null,{default:e(()=>a[0]||(a[0]=[u("Timestamp")])),_:1}),s(t(m),null,{default:e(()=>a[1]||(a[1]=[u("Service")])),_:1}),s(t(m),null,{default:e(()=>a[2]||(a[2]=[u("Severity")])),_:1}),s(t(m),null,{default:e(()=>a[3]||(a[3]=[u("Message")])),_:1}),s(t(m),null,{default:e(()=>a[4]||(a[4]=[u("Trace ID")])),_:1})]),_:1})]),_:1}),s(t(w),null,{default:e(()=>[(n(!0),c(C,null,N(v.data,r=>(n(),g(t(x),{key:r.id},{default:e(()=>[s(t(p),{class:"font-mono text-sm"},{default:e(()=>[u(d(_(r.timestamp)),1)]),_:2},1024),s(t(p),null,{default:e(()=>[i("div",j,[i("span",null,d(r.service_name),1),i("span",D,d(r.namespace),1)])]),_:2},1024),s(t(p),null,{default:e(()=>[s(t(k),{class:S(f(r.severity_text))},{default:e(()=>[u(d(r.severity_text),1)]),_:2},1032,["class"])]),_:2},1024),s(t(p),{class:"max-w-xl"},{default:e(()=>[i("div",E,d(r.body),1)]),_:2},1024),s(t(p),{class:"font-mono text-sm"},{default:e(()=>[u(d(r.trace_id),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))}},F={class:"container py-8"},M={key:0,class:"mb-4 p-4 bg-red-50 text-red-600 rounded-md"},Q={key:1,class:"flex items-center justify-center h-64"},q={key:2,class:"p-4 mb-4 text-red-700 bg-red-100 rounded-md"},A={key:3,class:"text-center py-8 text-gray-500"},P=T({__name:"QueryView",setup(v){const f=y([]),_=y(!0),l=y(null);async function a(){var r;try{_.value=!0;const b=await(await fetch("/api/logs/test-source?limit=50")).json();f.value=((r=b.data)==null?void 0:r.logs)||[]}catch(o){l.value=o instanceof Error?o.message:"Failed to fetch logs"}finally{_.value=!1}}return L(()=>{a()}),(r,o)=>(n(),c("div",F,[o[1]||(o[1]=i("div",{class:"mb-8"},[i("h1",{class:"text-2xl font-bold"},"Query Explorer"),i("p",{class:"text-sm text-muted-foreground mt-1"},"Search and analyze your logs across all sources.")],-1)),l.value?(n(),c("div",M,d(l.value),1)):V("",!0),_.value?(n(),c("div",Q,o[0]||(o[0]=[i("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},null,-1)]))):l.value?(n(),c("div",q,d(l.value),1)):f.value.length===0?(n(),c("div",A," No logs found ")):(n(),g(z,{key:4,data:f.value},null,8,["data"]))]))}});export{P as default};
