import{c as I,o as c,a as b,b as _,r as f,n as h,u as e,d as y,e as ee,x as z,f as v,w as l,g as A,h as F,Z as te,i as w,j as o,_ as se,C as ae,m as S,U as le,X as oe,k as re,I as k,l as ne,p as O,q as K,s as de,t as ue,v as ie,y as ce,z as pe,A as fe,B as me,F as ye,D as ge,V as _e,K as be,E as ve,G as he,H as qe,J as xe,L as we,M as Se,Y as $e,N as Be,O as m,P as X,Q as Y,R as N,S as Ve,T as V}from"./index-DkeamFb-.js";/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=I("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=I("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=I("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),De={class:"relative w-full overflow-auto"},Te={__name:"Table",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("div",De,[_("table",{class:h(e(y)("w-full caption-bottom text-sm",t.class))},[f(r.$slots,"default")],2)]))}},Pe={__name:"TableBody",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("tbody",{class:h(e(y)("[&_tr:last-child]:border-0",t.class))},[f(r.$slots,"default")],2))}},$={__name:"TableCell",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("td",{class:h(e(y)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t.class))},[f(r.$slots,"default")],2))}},R={__name:"TableRow",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("tr",{class:h(e(y)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t.class))},[f(r.$slots,"default")],2))}},B={__name:"TableHead",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("th",{class:h(e(y)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t.class))},[f(r.$slots,"default")],2))}},Ne={__name:"TableHeader",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("thead",{class:h(e(y)("[&_tr]:border-b",t.class))},[f(r.$slots,"default")],2))}},W={__name:"Badge",props:{variant:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("div",{class:h(e(y)(e(Oe)({variant:s.variant}),t.class))},[f(r.$slots,"default")],2))}},Oe=ee("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),ze={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(s,{emit:t}){const d=z(s,t);return(a,u)=>(c(),v(e(te),A(F(e(d))),{default:l(()=>[f(a.$slots,"default")]),_:3},16))}},Ue={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:t}){const r=s,n=t,d=w(()=>{const{class:u,...p}=r;return p}),a=z(d,n);return(u,p)=>(c(),v(e(re),null,{default:l(()=>[o(e(se),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),o(e(ae),S(e(a),{class:e(y)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r.class)}),{default:l(()=>[f(u.$slots,"default"),o(e(le),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:l(()=>[o(e(oe),{class:"w-4 h-4"}),p[0]||(p[0]=_("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},je={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("div",{class:h(e(y)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",t.class))},[f(r.$slots,"default")],2))}},Ie={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),b("div",{class:h(e(y)("flex flex-col gap-y-1.5 text-center sm:text-left",t.class))},[f(r.$slots,"default")],2))}},Ae={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s,r=w(()=>{const{class:d,...a}=t;return a}),n=k(r);return(d,a)=>(c(),v(e(ne),S(e(n),{class:e(y)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:l(()=>[f(d.$slots,"default")]),_:3},16,["class"]))}};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Fe=s=>typeof s<"u";function Le(s){return JSON.parse(JSON.stringify(s))}function Ee(s,t,r,n={}){var d,a,u;const{clone:p=!1,passive:i=!1,eventName:g,deep:L=!1,defaultValue:Q,shouldEmit:E}=n,x=de(),M=r||(x==null?void 0:x.emit)||((d=x==null?void 0:x.$emit)==null?void 0:d.bind(x))||((u=(a=x==null?void 0:x.proxy)==null?void 0:a.$emit)==null?void 0:u.bind(x==null?void 0:x.proxy));let C=g;C=C||`update:${t.toString()}`;const H=q=>p?typeof p=="function"?p(q):Le(q):q,J=()=>Fe(s[t])?H(s[t]):Q,G=q=>{E?E(q)&&M(C,q):M(C,q)};if(i){const q=J(),U=O(q);let D=!1;return K(()=>s[t],T=>{D||(D=!0,U.value=H(T),ue(()=>D=!1))}),K(U,T=>{!D&&(T!==s[t]||L)&&G(T)},{deep:L}),U}else return w({get(){return J()},set(q){G(q)}})}const j={__name:"Input",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(s,{emit:t}){const r=s,d=Ee(r,"modelValue",t,{passive:!0,defaultValue:r.defaultValue});return(a,u)=>ie((c(),b("input",{"onUpdate:modelValue":u[0]||(u[0]=p=>pe(d)?d.value=p:null),class:h(e(y)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r.class))},null,2)),[[ce,e(d)]])}},P={__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s,r=w(()=>{const{class:n,...d}=t;return d});return(n,d)=>(c(),v(e(fe),S(r.value,{class:e(y)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t.class)}),{default:l(()=>[f(n.$slots,"default")]),_:3},16,["class"]))}},Me={__name:"Select",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:String,required:!1},modelValue:{type:String,required:!1},dir:{type:String,required:!1},name:{type:String,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(s,{emit:t}){const d=z(s,t);return(a,u)=>(c(),v(e(me),A(F(e(d))),{default:l(()=>[f(a.$slots,"default")]),_:3},16))}},He=Object.assign({inheritAttrs:!1},{__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1,default:"popper"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(s,{emit:t}){const r=s,n=t,d=w(()=>{const{class:u,...p}=r;return p}),a=z(d,n);return(u,p)=>(c(),v(e(_e),null,{default:l(()=>[o(e(ye),S({...e(a),...u.$attrs},{class:e(y)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r.class)}),{default:l(()=>[o(e(Re)),o(e(ge),{class:h(e(y)("p-1",s.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:l(()=>[f(u.$slots,"default")]),_:3},8,["class"]),o(e(Ke))]),_:3},16,["class"])]),_:3}))}}),Je={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Ge={__name:"SelectItem",props:{value:{type:String,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s,r=w(()=>{const{class:d,...a}=t;return a}),n=k(r);return(d,a)=>(c(),v(e(he),S(e(n),{class:e(y)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.class)}),{default:l(()=>[_("span",Je,[o(e(be),null,{default:l(()=>[o(e(ke),{class:"h-4 w-4"})]),_:1})]),o(e(ve),null,{default:l(()=>[f(d.$slots,"default")]),_:3})]),_:3},16,["class"]))}},Ke={__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s,r=w(()=>{const{class:d,...a}=t;return a}),n=k(r);return(d,a)=>(c(),v(e(qe),S(e(n),{class:e(y)("flex cursor-default items-center justify-center py-1",t.class)}),{default:l(()=>[f(d.$slots,"default",{},()=>[o(e(Z),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},Re={__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s,r=w(()=>{const{class:d,...a}=t;return a}),n=k(r);return(d,a)=>(c(),v(e(xe),S(e(n),{class:e(y)("flex cursor-default items-center justify-center py-1",t.class)}),{default:l(()=>[f(d.$slots,"default",{},()=>[o(e(Ce),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},We={__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const t=s,r=w(()=>{const{class:d,...a}=t;return a}),n=k(r);return(d,a)=>(c(),v(e(Se),S(e(n),{class:e(y)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",t.class)}),{default:l(()=>[f(d.$slots,"default"),o(e(we),{"as-child":""},{default:l(()=>[o(e(Z),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}},Xe={__name:"SelectValue",props:{placeholder:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const t=s;return(r,n)=>(c(),v(e($e),A(F(t)),{default:l(()=>[f(r.$slots,"default")]),_:3},16))}},Ye={class:"space-y-2"},Ze={class:"space-y-2"},Qe={class:"space-y-2"},et={class:"space-y-2"},tt={__name:"AddSourceDialog",props:{open:Boolean},emits:["update:open"],setup(s,{emit:t}){const r=t,n=O({name:"",schemaType:"",dsn:"",ttlDays:90}),d=[{value:"http",label:"HTTP Logs"},{value:"app",label:"Application Logs"}],{toast:a}=Be(),u=async()=>{try{const p=await fetch("/api/sources",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value)}),i=await p.json();if(!p.ok)throw new Error(i.message||"Failed to create source");a({title:"Success",description:"Source created successfully"}),r("update:open",!1)}catch(p){a({variant:"destructive",title:"Error",description:p.message}),console.error("Error creating source:",p)}};return(p,i)=>(c(),v(e(ze),{open:s.open,"onUpdate:open":i[4]||(i[4]=g=>p.$emit("update:open",g))},{default:l(()=>[o(e(Ue),{class:"sm:max-w-[425px]"},{default:l(()=>[o(e(Ie),null,{default:l(()=>[o(e(Ae),null,{default:l(()=>i[5]||(i[5]=[m("Add New Source")])),_:1})]),_:1}),_("form",{onSubmit:Ve(u,["prevent"]),class:"space-y-4"},[_("div",Ye,[o(e(P),{for:"name"},{default:l(()=>i[6]||(i[6]=[m("Name")])),_:1}),o(e(j),{id:"name",modelValue:n.value.name,"onUpdate:modelValue":i[0]||(i[0]=g=>n.value.name=g),placeholder:"my-nginx-logs"},null,8,["modelValue"])]),_("div",Ze,[o(e(P),{for:"schema-type"},{default:l(()=>i[7]||(i[7]=[m("Schema Type")])),_:1}),o(e(Me),{modelValue:n.value.schemaType,"onUpdate:modelValue":i[1]||(i[1]=g=>n.value.schemaType=g)},{default:l(()=>[o(e(We),null,{default:l(()=>[o(e(Xe),{placeholder:"Select schema type"})]),_:1}),o(e(He),null,{default:l(()=>[(c(),b(Y,null,X(d,g=>o(e(Ge),{key:g.value,value:g.value},{default:l(()=>[m(V(g.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),_("div",Qe,[o(e(P),{for:"dsn"},{default:l(()=>i[8]||(i[8]=[m("DSN")])),_:1}),o(e(j),{id:"dsn",modelValue:n.value.dsn,"onUpdate:modelValue":i[2]||(i[2]=g=>n.value.dsn=g),placeholder:"clickhouse://localhost:9000/database"},null,8,["modelValue"])]),_("div",et,[o(e(P),{for:"ttl"},{default:l(()=>i[9]||(i[9]=[m("TTL (days)")])),_:1}),o(e(j),{id:"ttl",type:"number",modelValue:n.value.ttlDays,"onUpdate:modelValue":i[3]||(i[3]=g=>n.value.ttlDays=g)},null,8,["modelValue"])]),o(e(je),null,{default:l(()=>[o(e(N),{type:"submit",class:"w-full"},{default:l(()=>i[10]||(i[10]=[m("Create Source")])),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]))}},st={class:"container py-8"},at={class:"mb-8 flex items-center justify-between"},lt={class:"rounded-md border"},rt={__name:"SourcesView",setup(s){const t=O(!1),r=O([{id:"1",name:"nginx-logs",type:"file",status:"connected",lastSynced:new Date().toISOString()},{id:"2",name:"aws-logs",type:"s3",status:"error",lastSynced:new Date().toISOString()}]),n=d=>{switch(d){case"connected":return"bg-green-500";case"error":return"bg-red-500";default:return"bg-yellow-500"}};return(d,a)=>(c(),b("div",st,[_("div",at,[a[3]||(a[3]=_("div",null,[_("h1",{class:"text-3xl font-semibold tracking-tight"},"Sources"),_("p",{class:"text-sm text-muted-foreground mt-1"},"Manage your log sources and their configurations.")],-1)),o(e(N),{onClick:a[0]||(a[0]=u=>t.value=!0),size:"sm"},{default:l(()=>a[2]||(a[2]=[m(" Add Source ")])),_:1})]),_("div",lt,[o(e(Te),null,{default:l(()=>[o(e(Ne),null,{default:l(()=>[o(e(R),null,{default:l(()=>[o(e(B),null,{default:l(()=>a[4]||(a[4]=[m("Name")])),_:1}),o(e(B),null,{default:l(()=>a[5]||(a[5]=[m("Type")])),_:1}),o(e(B),null,{default:l(()=>a[6]||(a[6]=[m("Status")])),_:1}),o(e(B),null,{default:l(()=>a[7]||(a[7]=[m("Last Synced")])),_:1}),o(e(B),null,{default:l(()=>a[8]||(a[8]=[m("Actions")])),_:1})]),_:1})]),_:1}),o(e(Pe),null,{default:l(()=>[(c(!0),b(Y,null,X(r.value,u=>(c(),v(e(R),{key:u.id},{default:l(()=>[o(e($),null,{default:l(()=>[m(V(u.name),1)]),_:2},1024),o(e($),null,{default:l(()=>[o(e(W),null,{default:l(()=>[m(V(u.type),1)]),_:2},1024)]),_:2},1024),o(e($),null,{default:l(()=>[o(e(W),{class:h(n(u.status))},{default:l(()=>[m(V(u.status),1)]),_:2},1032,["class"])]),_:2},1024),o(e($),null,{default:l(()=>[m(V(new Date(u.lastSynced).toLocaleString()),1)]),_:2},1024),o(e($),null,{default:l(()=>[o(e(N),{variant:"ghost",size:"sm"},{default:l(()=>a[9]||(a[9]=[m("Edit")])),_:1}),o(e(N),{variant:"ghost",size:"sm",class:"text-red-500"},{default:l(()=>a[10]||(a[10]=[m("Delete")])),_:1})]),_:1})]),_:2},1024))),128))]),_:1})]),_:1})]),o(tt,{open:t.value,"onUpdate:open":a[1]||(a[1]=u=>t.value=u)},null,8,["open"])]))}};export{rt as default};
