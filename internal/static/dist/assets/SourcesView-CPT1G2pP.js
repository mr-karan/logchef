import{c as J,x as z,o as m,a as b,w as t,r as q,n as G,g as K,u as e,Z as ue,b as k,d as s,_ as ie,C as ce,m as V,e as w,U as pe,X as fe,f as g,h as me,I as D,S as ye,i as S,j as A,k as ge,l as x,p as se,q as ve,s as _e,t as be,v as xe,y as qe,z as we,A as Se,F as $e,B as he,V as ke,K as Te,D as Ce,E as Ve,G as De,H as Be,J as Ne,M as Pe,Y as Ue,L as oe,N as f,O as ne,P as re,Q as C,R as Le,T as h,W as U,$ as Oe}from"./index-CcukILwC.js";import{_ as je,a as ae,b as B,c as Ee,d as ze,e as N,f as le}from"./index-DNECLr4U.js";/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=J("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=J("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=J("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),F="/api",M={async fetchSources(){const a=await fetch(`${F}/sources`);if(!a.ok)throw new Error("Failed to fetch sources");const l=await a.json();return l.data=l.data||[],l},async deleteSource(a){const l=await fetch(`${F}/sources/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),r=await l.text();if(!l.ok){const i=r?JSON.parse(r):{};throw new Error(i.message||"Failed to delete source")}return r},async updateSourceTTL(a,l){const r=await fetch(`${F}/sources/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ttl_days:l})});if(!r.ok)throw new Error("Failed to update TTL");return r.json()}},R={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(a,{emit:l}){const o=z(a,l);return(n,p)=>(m(),b(e(ue),G(K(e(o))),{default:t(()=>[q(n.$slots,"default")]),_:3},16))}},W={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(a,{emit:l}){const r=a,i=l,o=k(()=>{const{class:p,...y}=r;return y}),n=z(o,i);return(p,y)=>(m(),b(e(me),null,{default:t(()=>[s(e(ie),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),s(e(ce),V(e(n),{class:e(w)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r.class)}),{default:t(()=>[q(p.$slots,"default"),s(e(pe),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:t(()=>[s(e(fe),{class:"w-4 h-4"}),y[0]||(y[0]=g("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},Fe={__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:o,...n}=l;return n}),i=D(r);return(o,n)=>(m(),b(e(ye),V(e(i),{class:e(w)("text-sm text-muted-foreground",l.class)}),{default:t(()=>[q(o.$slots,"default")]),_:3},16,["class"]))}},H={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(a){const l=a;return(r,i)=>(m(),S("div",{class:A(e(w)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",l.class))},[q(r.$slots,"default")],2))}},Y={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(a){const l=a;return(r,i)=>(m(),S("div",{class:A(e(w)("flex flex-col gap-y-1.5 text-center sm:text-left",l.class))},[q(r.$slots,"default")],2))}},X={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:o,...n}=l;return n}),i=D(r);return(o,n)=>(m(),b(e(ge),V(e(i),{class:e(w)("text-lg font-semibold leading-none tracking-tight",l.class)}),{default:t(()=>[q(o.$slots,"default")]),_:3},16,["class"]))}};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Me=a=>typeof a<"u";function Je(a){return JSON.parse(JSON.stringify(a))}function Ge(a,l,r,i={}){var o,n,p;const{clone:y=!1,passive:c=!1,eventName:d,deep:_=!1,defaultValue:u,shouldEmit:v}=i,T=ve(),Z=r||(T==null?void 0:T.emit)||((o=T==null?void 0:T.$emit)==null?void 0:o.bind(T))||((p=(n=T==null?void 0:T.proxy)==null?void 0:n.$emit)==null?void 0:p.bind(T==null?void 0:T.proxy));let O=d;O=O||`update:${l.toString()}`;const Q=$=>y?typeof y=="function"?y($):Je($):$,ee=()=>Me(a[l])?Q(a[l]):u,te=$=>{v?v($)&&Z(O,$):Z(O,$)};if(c){const $=ee(),I=x($);let j=!1;return se(()=>a[l],E=>{j||(j=!0,I.value=Q(E),_e(()=>j=!1))}),se(I,E=>{!j&&(E!==a[l]||_)&&te(E)},{deep:_}),I}else return k({get(){return ee()},set($){te($)}})}const L={__name:"Input",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(a,{emit:l}){const r=a,o=Ge(r,"modelValue",l,{passive:!0,defaultValue:r.defaultValue});return(n,p)=>be((m(),S("input",{"onUpdate:modelValue":p[0]||(p[0]=y=>qe(o)?o.value=y:null),class:A(e(w)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r.class))},null,2)),[[xe,e(o)]])}},P={__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:i,...o}=l;return o});return(i,o)=>(m(),b(e(we),V(r.value,{class:e(w)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",l.class)}),{default:t(()=>[q(i.$slots,"default")]),_:3},16,["class"]))}},Ke={__name:"Select",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:String,required:!1},modelValue:{type:String,required:!1},dir:{type:String,required:!1},name:{type:String,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(a,{emit:l}){const o=z(a,l);return(n,p)=>(m(),b(e(Se),G(K(e(o))),{default:t(()=>[q(n.$slots,"default")]),_:3},16))}},Re=Object.assign({inheritAttrs:!1},{__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1,default:"popper"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(a,{emit:l}){const r=a,i=l,o=k(()=>{const{class:p,...y}=r;return y}),n=z(o,i);return(p,y)=>(m(),b(e(ke),null,{default:t(()=>[s(e($e),V({...e(n),...p.$attrs},{class:e(w)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r.class)}),{default:t(()=>[s(e(Xe)),s(e(he),{class:A(e(w)("p-1",a.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:t(()=>[q(p.$slots,"default")]),_:3},8,["class"]),s(e(Ye))]),_:3},16,["class"])]),_:3}))}}),We={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},He={__name:"SelectItem",props:{value:{type:String,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:o,...n}=l;return n}),i=D(r);return(o,n)=>(m(),b(e(Ve),V(e(i),{class:e(w)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l.class)}),{default:t(()=>[g("span",We,[s(e(Te),null,{default:t(()=>[s(e(Ae),{class:"h-4 w-4"})]),_:1})]),s(e(Ce),null,{default:t(()=>[q(o.$slots,"default")]),_:3})]),_:3},16,["class"]))}},Ye={__name:"SelectScrollDownButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:o,...n}=l;return n}),i=D(r);return(o,n)=>(m(),b(e(De),V(e(i),{class:e(w)("flex cursor-default items-center justify-center py-1",l.class)}),{default:t(()=>[q(o.$slots,"default",{},()=>[s(e(de),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},Xe={__name:"SelectScrollUpButton",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:o,...n}=l;return n}),i=D(r);return(o,n)=>(m(),b(e(Be),V(e(i),{class:e(w)("flex cursor-default items-center justify-center py-1",l.class)}),{default:t(()=>[q(o.$slots,"default",{},()=>[s(e(Ie),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},Ze={__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(a){const l=a,r=k(()=>{const{class:o,...n}=l;return n}),i=D(r);return(o,n)=>(m(),b(e(Pe),V(e(i),{class:e(w)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",l.class)}),{default:t(()=>[q(o.$slots,"default"),s(e(Ne),{"as-child":""},{default:t(()=>[s(e(de),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}},Qe={__name:"SelectValue",props:{placeholder:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const l=a;return(r,i)=>(m(),b(e(Ue),G(K(l)),{default:t(()=>[q(r.$slots,"default")]),_:3},16))}},et={class:"space-y-2"},tt={class:"space-y-2"},st={class:"space-y-2"},at={class:"space-y-2"},lt={__name:"AddSourceDialog",props:{open:Boolean},emits:["update:open"],setup(a,{emit:l}){const r=l,i=x({name:"",schema_type:"",dsn:"",ttl_days:90}),o=[{value:"http",label:"HTTP Logs"},{value:"application",label:"Application Logs"}],{toast:n}=oe(),p=async()=>{try{const y=await fetch("/api/sources",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i.value)}),c=await y.json();if(!y.ok)throw new Error(c.message||"Failed to create source");n({title:"Success",description:"Source created successfully"}),r("update:open",!1),r("source-added")}catch(y){n({variant:"destructive",title:"Error",description:y.message}),console.error("Error creating source:",y)}};return(y,c)=>(m(),b(e(R),{open:a.open,"onUpdate:open":c[4]||(c[4]=d=>y.$emit("update:open",d))},{default:t(()=>[s(e(W),{class:"sm:max-w-[425px]"},{default:t(()=>[s(e(Y),null,{default:t(()=>[s(e(X),null,{default:t(()=>c[5]||(c[5]=[f("Add New Source")])),_:1})]),_:1}),g("form",{onSubmit:Le(p,["prevent"]),class:"space-y-4"},[g("div",et,[s(e(P),{for:"name"},{default:t(()=>c[6]||(c[6]=[f("Name")])),_:1}),s(e(L),{id:"name",modelValue:i.value.name,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value.name=d),placeholder:"my-nginx-logs",required:"",minlength:"4",maxlength:"30"},null,8,["modelValue"])]),g("div",tt,[s(e(P),{for:"schema-type"},{default:t(()=>c[7]||(c[7]=[f("Schema Type")])),_:1}),s(e(Ke),{modelValue:i.value.schema_type,"onUpdate:modelValue":c[1]||(c[1]=d=>i.value.schema_type=d),required:""},{default:t(()=>[s(e(Ze),null,{default:t(()=>[s(e(Qe),{placeholder:"Select schema type"})]),_:1}),s(e(Re),null,{default:t(()=>[(m(),S(re,null,ne(o,d=>s(e(He),{key:d.value,value:d.value},{default:t(()=>[f(h(d.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),g("div",st,[s(e(P),{for:"dsn"},{default:t(()=>c[8]||(c[8]=[f("DSN")])),_:1}),s(e(L),{id:"dsn",modelValue:i.value.dsn,"onUpdate:modelValue":c[2]||(c[2]=d=>i.value.dsn=d),placeholder:"clickhouse://localhost:9000/logs",required:""},null,8,["modelValue"])]),g("div",at,[s(e(P),{for:"ttl"},{default:t(()=>c[9]||(c[9]=[f("TTL (days)")])),_:1}),s(e(L),{id:"ttl",type:"number",modelValue:i.value.ttl_days,"onUpdate:modelValue":c[3]||(c[3]=d=>i.value.ttl_days=d)},null,8,["modelValue"])]),s(e(H),null,{default:t(()=>[s(e(C),{type:"submit",class:"w-full"},{default:t(()=>c[10]||(c[10]=[f("Create Source")])),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]))}},ot={class:"py-4"},nt={class:"space-y-4"},rt={class:"space-y-2"},dt={key:0,class:"text-red-500 text-sm"},ut={__name:"UpdateTTLDialog",props:{open:Boolean,sourceId:String,sourceName:String},emits:["update:open","ttl-updated"],setup(a,{emit:l}){const r=a,i=l,o=x(""),n=x(!1),p=x(""),y=async()=>{if(!o.value||isNaN(o.value)||o.value<=0){p.value="Please enter a valid number of days";return}try{n.value=!0,await M.updateSourceTTL(r.sourceId,parseInt(o.value)),i("ttl-updated"),i("update:open",!1)}catch(c){p.value=c.message}finally{n.value=!1}};return(c,d)=>(m(),b(e(R),{open:a.open,"onUpdate:open":d[2]||(d[2]=_=>c.$emit("update:open",_))},{default:t(()=>[s(e(W),null,{default:t(()=>[s(e(Y),null,{default:t(()=>[s(e(X),null,{default:t(()=>[f("Update TTL for "+h(a.sourceName),1)]),_:1})]),_:1}),g("div",ot,[g("div",nt,[g("div",rt,[s(e(P),null,{default:t(()=>d[3]||(d[3]=[f("TTL (days)")])),_:1}),s(e(L),{type:"number",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=_=>o.value=_),placeholder:"Enter number of days",disabled:n.value},null,8,["modelValue","disabled"])]),p.value?(m(),S("div",dt,h(p.value),1)):U("",!0)])]),s(e(H),null,{default:t(()=>[s(e(C),{variant:"outline",onClick:d[1]||(d[1]=_=>c.$emit("update:open",!1)),disabled:n.value},{default:t(()=>d[4]||(d[4]=[f(" Cancel ")])),_:1},8,["disabled"]),s(e(C),{onClick:y,loading:n.value},{default:t(()=>d[5]||(d[5]=[f(" Update TTL ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["open"]))}},it={class:"py-4"},ct={class:"space-y-4"},pt={class:"space-y-2"},ft={class:"text-sm text-muted-foreground"},mt={class:"font-semibold"},yt={key:0,class:"text-red-500 text-sm"},gt={__name:"DeleteSourceDialog",props:{open:Boolean,source:Object},emits:["update:open","confirm"],setup(a,{emit:l}){const r=a,i=l,o=x(""),n=x(!1),p=x(""),y=async()=>{if(o.value!==r.source.Name){p.value="Please type the source name exactly to confirm deletion";return}n.value=!0,i("confirm"),n.value=!1,o.value="",p.value=""};return(c,d)=>(m(),b(e(R),{open:a.open,"onUpdate:open":d[2]||(d[2]=_=>c.$emit("update:open",_))},{default:t(()=>[s(e(W),null,{default:t(()=>{var _;return[s(e(Y),null,{default:t(()=>[s(e(X),{class:"text-destructive"},{default:t(()=>d[3]||(d[3]=[f("Delete Source")])),_:1}),s(e(Fe),null,{default:t(()=>{var u;return[f(' This action cannot be undone. This will permanently delete the source "'+h((u=a.source)==null?void 0:u.Name)+'" and remove all associated data. ',1)]}),_:1})]),_:1}),g("div",it,[g("div",ct,[g("div",pt,[g("p",ft,[d[4]||(d[4]=f(" Please type ")),g("span",mt,h((_=a.source)==null?void 0:_.Name),1),d[5]||(d[5]=f(" to confirm. "))]),s(e(L),{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=u=>o.value=u),placeholder:"Type source name to confirm",disabled:n.value},null,8,["modelValue","disabled"])]),p.value?(m(),S("div",yt,h(p.value),1)):U("",!0)])]),s(e(H),null,{default:t(()=>{var u;return[s(e(C),{variant:"outline",onClick:d[1]||(d[1]=v=>c.$emit("update:open",!1)),disabled:n.value},{default:t(()=>d[6]||(d[6]=[f(" Cancel ")])),_:1},8,["disabled"]),s(e(C),{variant:"destructive",onClick:y,loading:n.value,disabled:o.value!==((u=a.source)==null?void 0:u.Name)},{default:t(()=>d[7]||(d[7]=[f(" Delete Source ")])),_:1},8,["loading","disabled"])]}),_:1})]}),_:1})]),_:1},8,["open"]))}},vt={class:"container py-8"},_t={class:"mb-8 flex items-center justify-between"},bt={key:0,class:"mb-4 p-4 text-red-500 bg-red-50 rounded-md"},xt={key:1,class:"text-center py-8"},qt={key:2,class:"text-center py-8"},wt={class:"max-w-md mx-auto space-y-4"},St={key:3,class:"rounded-md border"},kt={__name:"SourcesView",setup(a){const{toast:l}=oe(),r=x(!1),i=x(!1),o=x(!1),n=x(null),p=x([]),y=x(!0),c=x(null),d=async()=>{try{y.value=!0;const _=await M.fetchSources();p.value=_.data,c.value=null}catch(_){c.value=_.message,console.error("Error fetching sources:",_),p.value=[]}finally{y.value=!1}};return Oe(()=>{d()}),(_,u)=>(m(),S("div",vt,[g("div",_t,[u[7]||(u[7]=g("div",null,[g("h1",{class:"text-3xl font-semibold tracking-tight"},"Sources"),g("p",{class:"text-sm text-muted-foreground mt-1"},"Manage your log sources and their configurations.")],-1)),s(e(C),{onClick:u[0]||(u[0]=v=>r.value=!0),size:"sm"},{default:t(()=>u[6]||(u[6]=[f(" Add Source ")])),_:1})]),c.value?(m(),S("div",bt,h(c.value),1)):U("",!0),y.value&&!p.value.length?(m(),S("div",xt," Loading sources... ")):p.value.length===0?(m(),S("div",qt,[g("div",wt,[u[9]||(u[9]=g("h3",{class:"text-lg font-semibold"},"No sources found",-1)),u[10]||(u[10]=g("p",{class:"text-muted-foreground"},' Get started by adding your first log source. Click the "Add Source" button above to begin collecting and analyzing your logs. ',-1)),s(e(C),{onClick:u[1]||(u[1]=v=>r.value=!0),variant:"outline",class:"mt-4"},{default:t(()=>u[8]||(u[8]=[f(" Add Your First Source ")])),_:1})])])):(m(),S("div",St,[s(e(ze),null,{default:t(()=>[s(e(je),null,{default:t(()=>[s(e(ae),null,{default:t(()=>[s(e(B),null,{default:t(()=>u[11]||(u[11]=[f("Name")])),_:1}),s(e(B),null,{default:t(()=>u[12]||(u[12]=[f("Type")])),_:1}),s(e(B),null,{default:t(()=>u[13]||(u[13]=[f("Status")])),_:1}),s(e(B),null,{default:t(()=>u[14]||(u[14]=[f("Last Synced")])),_:1}),s(e(B),null,{default:t(()=>u[15]||(u[15]=[f("Actions")])),_:1})]),_:1})]),_:1}),s(e(Ee),null,{default:t(()=>[(m(!0),S(re,null,ne(p.value,v=>(m(),b(e(ae),{key:v.ID},{default:t(()=>[s(e(N),null,{default:t(()=>[f(h(v.Name),1)]),_:2},1024),s(e(N),null,{default:t(()=>[s(e(le),null,{default:t(()=>[f(h(v.SchemaType),1)]),_:2},1024)]),_:2},1024),s(e(N),null,{default:t(()=>[s(e(le),null,{default:t(()=>u[16]||(u[16]=[f("Connected")])),_:1})]),_:1}),s(e(N),null,{default:t(()=>[f(h(new Date(v.UpdatedAt).toLocaleString()),1)]),_:2},1024),s(e(N),{class:"space-x-2"},{default:t(()=>[s(e(C),{variant:"outline",size:"sm",onClick:()=>{n.value=v,i.value=!0}},{default:t(()=>u[17]||(u[17]=[f(" Update TTL ")])),_:2},1032,["onClick"]),s(e(C),{variant:"destructive",size:"sm",onClick:()=>{n.value=v,o.value=!0}},{default:t(()=>u[18]||(u[18]=[f(" Delete ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),s(lt,{open:r.value,"onUpdate:open":u[2]||(u[2]=v=>r.value=v),onSourceAdded:d},null,8,["open"]),n.value?(m(),b(ut,{key:4,open:i.value,"onUpdate:open":u[3]||(u[3]=v=>i.value=v),"source-id":n.value.ID,"source-name":n.value.Name,onTtlUpdated:d},null,8,["open","source-id","source-name"])):U("",!0),n.value?(m(),b(gt,{key:5,open:o.value,"onUpdate:open":u[4]||(u[4]=v=>o.value=v),source:n.value,onConfirm:u[5]||(u[5]=async()=>{try{await e(M).deleteSource(n.value.ID),e(l)({title:"Success",description:"Source deleted successfully"}),o.value=!1,await d()}catch(v){e(l)({title:"Error",description:v.message,variant:"destructive"})}})},null,8,["open","source"])):U("",!0)]))}};export{kt as default};
