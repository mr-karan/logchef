---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Changelog — LogChef" description="LogChef release history and version changelog." activeNav="changelog">
  <style>
    main { max-width: 900px; margin: 0 auto; padding: 6rem 1.5rem 4rem; }

    .page-header { margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid var(--color-border); }
    .page-header h1 { font-size: 2.5rem; font-weight: 700; letter-spacing: -0.03em; margin-bottom: 0.5rem; }
    .page-header p { color: var(--color-text-secondary); font-size: 1.125rem; }

    .version { margin-bottom: 3rem; padding-bottom: 2.5rem; border-bottom: 1px solid var(--color-border); }
    .version:last-child { border-bottom: none; }
    .version-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
    .version-tag { font-family: var(--font-mono); font-size: 1.25rem; font-weight: 600; color: var(--color-text); }
    .version-tag.unreleased { color: var(--color-purple); }
    .version-date {
      font-family: var(--font-mono); font-size: 0.8125rem; color: var(--color-text-dim);
      background: var(--color-surface); padding: 0.25rem 0.625rem; border-radius: 4px;
    }
    .version-badge {
      font-family: var(--font-mono); font-size: 0.6875rem; font-weight: 500;
      text-transform: uppercase; letter-spacing: 0.05em;
      padding: 0.25rem 0.5rem; border-radius: 4px;
      background: color-mix(in srgb, var(--color-success) 10%, transparent); color: var(--color-success);
    }
    .version-link { font-family: var(--font-mono); font-size: 0.75rem; color: var(--color-text-dim); margin-left: auto; }
    .version-link:hover { color: var(--color-accent); text-decoration: none; }

    .change-section { margin-bottom: 1.5rem; }
    .change-section:last-child { margin-bottom: 0; }
    .change-type {
      display: inline-flex; align-items: center; gap: 0.375rem;
      font-family: var(--font-mono); font-size: 0.6875rem; font-weight: 500;
      text-transform: uppercase; letter-spacing: 0.05em;
      padding: 0.25rem 0.5rem; border-radius: 4px; margin-bottom: 0.75rem;
    }
    .change-type.added { background: color-mix(in srgb, var(--color-success) 10%, transparent); color: var(--color-success); }
    .change-type.changed { background: color-mix(in srgb, var(--color-warning) 10%, transparent); color: var(--color-warning); }
    .change-type.fixed { background: color-mix(in srgb, var(--color-accent) 10%, transparent); color: var(--color-accent); }
    .change-type.removed { background: color-mix(in srgb, var(--color-error) 10%, transparent); color: var(--color-error); }
    .change-type svg { width: 12px; height: 12px; }

    .change-list { list-style: none; display: flex; flex-direction: column; gap: 0.625rem; padding-left: 0.25rem; }
    .change-list li {
      position: relative; padding-left: 1.25rem;
      font-size: 0.9375rem; color: var(--color-text-secondary); line-height: 1.6;
    }
    .change-list li::before {
      content: ''; position: absolute; left: 0; top: 0.625rem;
      width: 4px; height: 4px; border-radius: 50%; background: var(--color-text-dim);
    }
    .change-list li strong { color: var(--color-text); font-weight: 500; }
    .change-list li code {
      font-family: var(--font-mono); font-size: 0.8125rem;
      background: var(--color-surface); padding: 0.125rem 0.375rem;
      border-radius: 4px; color: var(--color-accent);
    }
    .change-list .breaking { color: var(--color-warning); font-weight: 600; }

    .contributors {
      margin-top: 1rem; padding-top: 1rem;
      border-top: 1px dashed var(--color-border);
      font-size: 0.875rem; color: var(--color-text-dim);
    }
    .contributors a { color: var(--color-text-secondary); }

    @media (max-width: 768px) {
      .page-header h1 { font-size: 2rem; }
      .version-header { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
      .version-link { margin-left: 0; }
    }
  </style>

  <main>
    <header class="page-header">
      <h1>Changelog</h1>
      <p>What's new in LogChef.</p>
    </header>

    <!-- CLI v0.1.2 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">CLI v0.1.2</span>
        <span class="version-date">Jan 21, 2026</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/cli-v0.1.2" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>CLI <code>collections</code> command</strong> — List and run saved queries from the command line</li>
          <li><strong>Interactive mode</strong> — Run <code>query</code> or <code>sql</code> without arguments for guided prompts with arrow-key navigation</li>
          <li><strong>Copy CLI command button</strong> — Click terminal icon in explore toolbar to copy equivalent CLI command</li>
        </ul>
      </div>
    </article>

    <!-- CLI v0.1.1 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">CLI v0.1.1</span>
        <span class="version-date">Jan 21, 2026</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/cli-v0.1.1" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>CLI <code>sql</code> command</strong> — Execute raw ClickHouse SQL queries directly from the terminal with full SQL control</li>
        </ul>
      </div>
    </article>

    <!-- v1.2.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v1.2.0</span>
        <span class="version-date">Jan 21, 2026</span>
        <span class="version-badge">Latest</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v1.2.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>Rust CLI</strong> — New cross-platform CLI for LogChef with <code>auth</code>, <code>query</code>, and <code>config</code> commands.</li>
          <li>Multi-context support for managing dev, staging, and prod instances</li>
          <li><strong>CLI output controls</strong> — Use <code>--no-timestamp</code> to hide timestamps in text output</li>
          <li><strong>Alerts via SMTP and webhooks</strong> — Deliver notifications directly without Alertmanager</li>
          <li><strong>Multi-Select Variables</strong> — Select multiple values that expand to <code>IN (...)</code> clauses. Perfect for filtering by multiple hosts, services, or error codes.</li>
          <li><strong>Optional SQL Clauses</strong> — Wrap clauses in <code>[[ ... ]]</code> to auto-remove them when the variable is empty. No more "WHERE 1=1" hacks.</li>
          <li><strong>Variable Widgets</strong> — Configure variables as text inputs, dropdowns, or multi-selects with default values.</li>
          <li><strong>All Sources View</strong> — Browse saved queries across all sources in one place from Collections.</li>
          <li>Smart LIMIT handling in SQL mode</li>
          <li>Support for CTEs, JOINs, and subqueries with template variables</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type fixed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M20 6L9 17l-5-5"/></svg>
          Fixed
        </div>
        <ul class="change-list">
          <li><strong>SQLite concurrency fix</strong> — Dual-connection pattern prevents <code>SQLITE_BUSY</code> errors under load</li>
          <li>Relative time range now refreshes before each query execution</li>
          <li>Variable date display uses consistent YYYY-MM-DD format</li>
          <li>Collections race condition on initial load</li>
          <li>Scroll bar issues in explorer view</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type removed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M4 7h16M9 7V5h6v2M6 7l1 12h10l1-12"/></svg>
          Removed
        </div>
        <ul class="change-list">
          <li>Legacy Go CLI removed in favor of the Rust CLI</li>
        </ul>
      </div>

      <div class="contributors">
        <strong>Contributors:</strong>
        <a href="https://github.com/blu3id" target="_blank">@blu3id</a>,
        <a href="https://github.com/SValanukonda" target="_blank">@SValanukonda</a>
      </div>
    </article>

    <!-- v1.1.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v1.1.0</span>
        <span class="version-date">Dec 29, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v1.1.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>Bookmark Favorite Queries</strong> — Star saved queries for quick access. Bookmarked queries appear at top of collections dropdown.</li>
          <li>Copy shareable URL for any saved query</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type changed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 20v-8m0 0V4m0 8h8m-8 0H4"/></svg>
          Changed
        </div>
        <ul class="change-list">
          <li><strong>LogChefQL Parser Rewrite</strong> — Grammar-based parser with better error messages</li>
          <li><strong>Frontend Tooling</strong> — Switched to Bun + rolldown-vite. Build time: ~2.3s (was >55s)</li>
          <li>Refactored frontend state management with centralized URL sync</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type fixed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M20 6L9 17l-5-5"/></svg>
          Fixed
        </div>
        <ul class="change-list">
          <li>Saved query navigation no longer shows stale content</li>
          <li>Team/source context preserved when navigating between pages</li>
          <li>Sidebar links now include full context params</li>
        </ul>
      </div>

      <div class="contributors">
        <strong>Contributors:</strong> <a href="https://github.com/rhnvrm" target="_blank">@rhnvrm</a>
      </div>
    </article>

    <!-- v1.0.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v1.0.0</span>
        <span class="version-date">Dec 22, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v1.0.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>Field Values Sidebar</strong> — Kibana-style field exploration. Browse fields, see top values, click to filter.</li>
          <li><strong>Backend LogchefQL Parser</strong> — Full parsing, validation, and type-aware SQL generation in Go</li>
          <li><strong>Query Cancellation</strong> — Cancel button or Esc key stops the query in ClickHouse, not just the UI</li>
          <li>Auto-fit column widths by double-clicking the header resizer</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type changed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 20v-8m0 0V4m0 8h8m-8 0H4"/></svg>
          Changed
        </div>
        <ul class="change-list">
          <li><span class="breaking">Breaking:</span> LogchefQL parsing moved from frontend to backend</li>
          <li>Backend is now the single source of truth for SQL generation</li>
          <li>Improved data table with compact rows, click-to-copy, and floating cell actions</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type fixed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M20 6L9 17l-5-5"/></svg>
          Fixed
        </div>
        <ul class="change-list">
          <li>Histogram queries now work with MATERIALIZED timestamp columns</li>
          <li>Surrounding logs (context modal) works with MATERIALIZED columns</li>
          <li>Field values queries have 15s timeout to prevent query pileup</li>
        </ul>
      </div>
    </article>

    <!-- v0.6.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v0.6.0</span>
        <span class="version-date">Dec 4, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v0.6.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>Alerting</strong> — Create SQL-based alerts with native email and webhooks. Route to Slack, PagerDuty, or email.</li>
          <li><strong>Admin Settings</strong> — Configure AI, authentication, and alerts from the web UI</li>
          <li>Duplicate sources for quick setup</li>
          <li>Keyboard navigation in dropdowns</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type changed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 20v-8m0 0V4m0 8h8m-8 0H4"/></svg>
          Changed
        </div>
        <ul class="change-list">
          <li>Settings now persist in database instead of config file</li>
          <li>Redesigned alerts list with better readability</li>
        </ul>
      </div>
    </article>

    <!-- v0.5.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v0.5.0</span>
        <span class="version-date">Oct 3, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v0.5.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>Pipe Operator</strong> — Select specific columns with <code>status="500" | timestamp method path</code></li>
          <li><strong>Nested JSON Queries</strong> — Filter on nested fields like <code>user.address.city = "NYC"</code></li>
          <li><strong>Query History</strong> — Access your recent queries from the editor</li>
          <li><strong>Source Stats</strong> — View table schema, TTL settings, and sort keys</li>
        </ul>
      </div>
    </article>

    <!-- v0.4.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v0.4.0</span>
        <span class="version-date">Aug 12, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v0.4.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>Query Variables</strong> — Define reusable variables in your queries with dynamic input fields</li>
          <li><strong>Prometheus Metrics</strong> — Monitor LogChef with comprehensive metrics</li>
          <li><strong>Grafana Dashboard</strong> — Pre-built dashboard for monitoring</li>
          <li><strong>Compact View</strong> — Terminal-style log display for denser viewing</li>
        </ul>
      </div>

      <div class="change-section">
        <div class="change-type fixed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M20 6L9 17l-5-5"/></svg>
          Fixed
        </div>
        <ul class="change-list">
          <li>Team switching no longer causes 403 errors</li>
          <li>Saved queries load reliably on page refresh</li>
        </ul>
      </div>

      <div class="contributors">
        <strong>Contributors:</strong> <a href="https://github.com/songxuanqing" target="_blank">@songxuanqing</a>
      </div>
    </article>

    <!-- v0.3.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v0.3.0</span>
        <span class="version-date">Jun 13, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v0.3.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>MCP Server</strong> — Connect AI assistants like Claude to query your logs via Model Context Protocol</li>
        </ul>
      </div>
    </article>

    <!-- v0.2.2 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v0.2.2</span>
        <span class="version-date">Jun 12, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v0.2.2" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Added
        </div>
        <ul class="change-list">
          <li><strong>AI SQL Assistant</strong> — Describe what you want in plain English, get ClickHouse SQL</li>
          <li><strong>API Tokens</strong> — Programmatic access for scripts and integrations</li>
          <li>Query timeout configuration</li>
        </ul>
      </div>

      <div class="contributors">
        <strong>Contributors:</strong> 
        <a href="https://github.com/vedang" target="_blank">@vedang</a>,
        <a href="https://github.com/r--w" target="_blank">@r--w</a>,
        <a href="https://github.com/gowthamgts" target="_blank">@gowthamgts</a>
      </div>
    </article>

    <!-- v0.2.0 -->
    <article class="version">
      <div class="version-header">
        <span class="version-tag">v0.2.0</span>
        <span class="version-date">Apr 27, 2025</span>
        <a href="https://github.com/mr-karan/logchef/releases/tag/v0.2.0" class="version-link" target="_blank">Release notes →</a>
      </div>

      <div class="change-section">
        <div class="change-type added">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
          Initial Release
        </div>
        <ul class="change-list">
          <li><strong>Log Explorer</strong> — Interactive log exploration with real-time filtering</li>
          <li><strong>LogchefQL</strong> — Simple query language for filtering logs</li>
          <li><strong>SQL Mode</strong> — Full ClickHouse SQL for advanced queries</li>
          <li><strong>Saved Queries</strong> — Save and share queries with your team</li>
          <li><strong>Teams & RBAC</strong> — Multi-tenant access control</li>
          <li><strong>Histogram</strong> — Visual distribution of logs over time</li>
          <li><strong>Dark/Light Theme</strong> — Choose your preferred appearance</li>
          <li>Single binary, Docker Compose ready</li>
        </ul>
      </div>
    </article>
  </main>
</BaseLayout>
