# LogChef Configuration Sample
#
# This file demonstrates the MINIMAL configuration required to run LogChef.
# On first boot, non-essential settings will be seeded from this file to the database
# and can then be managed through the Admin Settings UI.
#
# After first boot, you can remove the optional sections ([ai], [alerts], auth session settings)
# from your config.toml as they will be stored in the database.

# ============================================================================
# ESSENTIAL CONFIGURATION (Required for bootstrap)
# ============================================================================

# Server configuration
[server]
port = 8125
host = "0.0.0.0"
# URL of the frontend application for CORS (can be empty in production if same origin)
frontend_url = "http://localhost:5173"
http_server_timeout = "30s"

# SQLite database configuration
[sqlite]
path = "local.db"

# OpenID Connect configuration (required for authentication)
[oidc]
provider_url = "http://localhost:5556/dex"
auth_url = "http://localhost:5556/dex/auth"
token_url = "http://localhost:5556/dex/token"
client_id = "logchef"
client_secret = "logchef-secret"
redirect_url = "http://localhost:8125/api/v1/auth/callback"
scopes = ["openid", "email", "profile"]

# Authentication configuration
[auth]
# Admin email addresses (required - these users will have admin privileges)
admin_emails = ["admin@example.com"]

# API token secret (required - generate with: openssl rand -hex 32)
# Must be at least 32 characters long for security
api_token_secret = "REPLACE_WITH_YOUR_SECRET_KEY_MINIMUM_32_CHARS"

# Logging configuration
[logging]
level = "info"  # Options: debug, info, warn, error

# ============================================================================
# OPTIONAL CONFIGURATION (Seeded to database on first boot)
# ============================================================================
# The sections below are OPTIONAL. If present, they will be seeded to the database
# on first boot. If absent, migration defaults will be used.
#
# After first boot, these settings are managed via the Admin Settings UI and can be
# removed from config.toml for future deployments.

# Session management (optional - seeded to database on first boot)
# Uncomment to customize session behavior
# session_duration = "8h"
# max_concurrent_sessions = 1
# default_token_expiry = "2160h"  # 90 days

# AI SQL generation (optional - seeded to database on first boot)
# Uncomment to enable AI features
# [ai]
# enabled = false
# base_url = ""  # Leave empty for default OpenAI endpoint (https://api.openai.com/v1), or use OpenAI-compatible API
# api_key = ""   # OpenAI API key or compatible provider key
# model = "gpt-4o"
# max_tokens = 1024
# temperature = 0.1

# Alerting (optional - seeded to database on first boot)
# Uncomment to enable alerting features
# [alerts]
# enabled = false
# evaluation_interval = "1m"
# default_lookback = "5m"
# history_limit = 50
# alertmanager_url = ""  # Alertmanager endpoint URL
# external_url = ""      # Backend URL for API access
# frontend_url = ""      # Frontend URL for web UI links in notifications
# request_timeout = "5s"
# tls_insecure_skip_verify = false
