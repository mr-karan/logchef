import{a6 as I,d as i,L as N,o as u,H as $,w as t,I as p,M as L,N as O,u as e,a7 as H,k as w,Q as C,J as _,a8 as P,a9 as E,aa as R,b as a,ab as j,ac as J,ad as K,ae as Q,c as f,n as y,af as U,a as F,a4 as Y,i as A,p as q,f as G,e as d,_ as S,F as W,r as X,t as h}from"./index-Bx1qnvvA.js";import{_ as Z,a as ee,b as te,c as se,d as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-CqYa1dkS.js";import{s as T}from"./sources-Yboo9CyN.js";import{P as le}from"./plus-Cp3_BuQ5.js";/**
 * @license lucide-vue-next v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=I("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ne=i({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(n,{emit:s}){const c=N(n,s);return(g,v)=>(u(),$(e(H),L(O(e(c))),{default:t(()=>[p(g.$slots,"default")]),_:3},16))}}),re=i({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const s=n,l=w(()=>{const{class:r,...c}=s;return c});return(r,c)=>(u(),$(e(E),C(l.value,{class:e(_)(e(P)(),s.class)}),{default:t(()=>[p(r.$slots,"default")]),_:3},16,["class"]))}}),ue=i({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const s=n,l=w(()=>{const{class:r,...c}=s;return c});return(r,c)=>(u(),$(e(R),C(l.value,{class:e(_)(e(P)({variant:"outline"}),"mt-2 sm:mt-0",s.class)}),{default:t(()=>[p(r.$slots,"default")]),_:3},16,["class"]))}}),ce=i({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(n,{emit:s}){const l=n,r=s,c=w(()=>{const{class:v,...b}=l;return b}),g=N(c,r);return(v,b)=>(u(),$(e(K),null,{default:t(()=>[a(e(j),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),a(e(J),C(e(g),{class:e(_)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l.class)}),{default:t(()=>[p(v.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),de=i({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const s=n,l=w(()=>{const{class:r,...c}=s;return c});return(r,c)=>(u(),$(e(Q),C(l.value,{class:e(_)("text-sm text-muted-foreground",s.class)}),{default:t(()=>[p(r.$slots,"default")]),_:3},16,["class"]))}}),ie=i({__name:"AlertDialogFooter",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("div",{class:y(e(_)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",s.class))},[p(l.$slots,"default")],2))}}),pe=i({__name:"AlertDialogHeader",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("div",{class:y(e(_)("flex flex-col gap-y-2 text-center sm:text-left",s.class))},[p(l.$slots,"default")],2))}}),fe=i({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const s=n,l=w(()=>{const{class:r,...c}=s;return c});return(r,c)=>(u(),$(e(U),C(l.value,{class:e(_)("text-lg font-semibold",s.class)}),{default:t(()=>[p(r.$slots,"default")]),_:3},16,["class"]))}}),_e={class:"relative w-full overflow-auto"},me=i({__name:"Table",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("div",_e,[F("table",{class:y(e(_)("w-full caption-bottom text-sm",s.class))},[p(l.$slots,"default")],2)]))}}),ge=i({__name:"TableBody",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("tbody",{class:y(e(_)("[&_tr:last-child]:border-0",s.class))},[p(l.$slots,"default")],2))}}),ve=i({__name:"TableCaption",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("caption",{class:y(e(_)("mt-4 text-sm text-muted-foreground",s.class))},[p(l.$slots,"default")],2))}}),k=i({__name:"TableCell",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("td",{class:y(e(_)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-0.5",s.class))},[p(l.$slots,"default")],2))}}),B=i({__name:"TableRow",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("tr",{class:y(e(_)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s.class))},[p(l.$slots,"default")],2))}}),D=i({__name:"TableHead",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("th",{class:y(e(_)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-0.5",s.class))},[p(l.$slots,"default")],2))}}),ye=i({__name:"TableHeader",props:{class:{}},setup(n){const s=n;return(l,r)=>(u(),f("thead",{class:y(e(_)("[&_tr]:border-b",s.class))},[p(l.$slots,"default")],2))}}),xe={class:"space-y-6"},$e={key:0,class:"text-center py-4"},be={key:1,class:"rounded-lg border p-4 text-center"},he={key:2,class:"space-y-4"},Se=i({__name:"ManageSources",setup(n){const s=G(),{toast:l}=Y(),r=A([]),c=A(!0),g=A(!1),v=A(null),b=async()=>{try{const x=await T.getSources();r.value=x.data}catch{l({title:"Error",description:"Failed to fetch sources",variant:"destructive"})}finally{c.value=!1}},M=async()=>{if(v.value)try{await T.deleteSource(v.value.ID),l({title:"Success",description:"Source deleted successfully"}),await b()}catch{l({title:"Error",description:"Failed to delete source",variant:"destructive"})}finally{g.value=!1,v.value=null}},z=x=>{v.value=x,g.value=!0};q(b);const V=x=>new Date(x).toLocaleDateString();return(x,o)=>(u(),f("div",xe,[a(e(ae),null,{default:t(()=>[a(e(Z),null,{default:t(()=>[a(e(ee),null,{default:t(()=>o[3]||(o[3]=[d("Manage Sources")])),_:1}),a(e(te),null,{default:t(()=>o[4]||(o[4]=[d(" View and manage your log sources ")])),_:1})]),_:1}),a(e(se),null,{default:t(()=>[c.value?(u(),f("div",$e," Loading sources... ")):r.value.length===0?(u(),f("div",be,[o[6]||(o[6]=F("p",{class:"text-muted-foreground mb-4"},"No sources configured yet",-1)),a(e(S),{onClick:o[0]||(o[0]=m=>e(s).push({name:"NewSource"}))},{default:t(()=>[a(e(le),{class:"mr-2 h-4 w-4"}),o[5]||(o[5]=d(" Add Your First Source "))]),_:1})])):(u(),f("div",he,[a(e(me),null,{default:t(()=>[a(e(ve),null,{default:t(()=>o[7]||(o[7]=[d("A list of your configured log sources")])),_:1}),a(e(ye),null,{default:t(()=>[a(e(B),null,{default:t(()=>[a(e(D),null,{default:t(()=>o[8]||(o[8]=[d("Name")])),_:1}),a(e(D),null,{default:t(()=>o[9]||(o[9]=[d("Schema Type")])),_:1}),a(e(D),null,{default:t(()=>o[10]||(o[10]=[d("DSN")])),_:1}),a(e(D),null,{default:t(()=>o[11]||(o[11]=[d("Created At")])),_:1}),a(e(D),{class:"text-right"},{default:t(()=>o[12]||(o[12]=[d("Actions")])),_:1})]),_:1})]),_:1}),a(e(ge),null,{default:t(()=>[(u(!0),f(W,null,X(r.value,m=>(u(),$(e(B),{key:m.ID},{default:t(()=>[a(e(k),{class:"font-medium"},{default:t(()=>[d(h(m.Name),1)]),_:2},1024),a(e(k),null,{default:t(()=>[d(h(m.SchemaType),1)]),_:2},1024),a(e(k),null,{default:t(()=>[d(h(m.DSN),1)]),_:2},1024),a(e(k),null,{default:t(()=>[d(h(V(m.CreatedAt)),1)]),_:2},1024),a(e(k),{class:"text-right"},{default:t(()=>[a(e(S),{variant:"destructive",size:"icon",onClick:ke=>z(m)},{default:t(()=>[a(e(oe),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))]),_:1})]),_:1}),a(e(ne),{open:g.value,"onUpdate:open":o[2]||(o[2]=m=>g.value=!1)},{default:t(()=>[a(e(ce),null,{default:t(()=>[a(e(pe),null,{default:t(()=>[a(e(fe),null,{default:t(()=>o[13]||(o[13]=[d("Delete Source")])),_:1}),a(e(de),null,{default:t(()=>{var m;return[d(' Are you sure you want to delete source "'+h((m=v.value)==null?void 0:m.Name)+'"? This action cannot be undone. ',1)]}),_:1})]),_:1}),a(e(ie),null,{default:t(()=>[a(e(ue),{onClick:o[1]||(o[1]=m=>g.value=!1)},{default:t(()=>o[14]||(o[14]=[d(" Cancel ")])),_:1}),a(e(re),{onClick:M,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:t(()=>o[15]||(o[15]=[d(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});export{Se as default};
