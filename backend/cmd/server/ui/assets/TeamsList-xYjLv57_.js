import{d as A,R as c,k as B,w as s,i as a,u as e,r as F,_ as b,j as n,m as o,af as M,a as _,l as R,t as p,o as u,aO as q,ai as z,F as I,B as G,p as O,ab as C,ac as k,ap as Y,aP as H,ad as D}from"./index-DhD1Jy6j.js";import{_ as J,a as K,b as Q}from"./CardHeader.vue_vue_type_script_setup_true_lang-B98r7nf9.js";import{_ as W,a as X}from"./CardTitle.vue_vue_type_script_setup_true_lang-C7I42q6I.js";import{_ as Z,a as h,b as ee,c as ae,d as se,e as te,f as le,g as ne}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BAw-LdwS.js";import{_ as oe,a as ie,b as N,c as g,d as de,e as $}from"./TableHeader.vue_vue_type_script_setup_true_lang-ag95AMYa.js";import{e as re,a as ue,b as me,c as fe,d as _e,_ as pe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DfBq9sy2.js";import{_ as ce}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-ChvGnXMc.js";import{_ as S,a as ve}from"./Label.vue_vue_type_script_setup_true_lang-CYXJfKeA.js";import{_ as ge}from"./Textarea.vue_vue_type_script_setup_true_lang-D0jxCyCO.js";import{u as E}from"./teams-B0mpmRSw.js";import{P as L}from"./plus-J0EuN1f1.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as be}from"./trash-2-CmwYiK2P.js";import{f as xe}from"./format-HUUZeily.js";import"./monaco-editor-2qzqsP3x.js";import"./types-ByjhqKv5.js";const Te={class:"grid gap-4 py-4"},we={class:"grid grid-cols-4 items-center gap-4"},ye={class:"grid grid-cols-4 items-center gap-4"},Ce={key:0,class:"loader mr-2"},ke=A({__name:"AddTeam",emits:["team-created"],setup(P,{emit:w}){const m=w,x=E(),f=c(""),r=c(""),i=c(!1),v=c(!1),y=async()=>{if(i.value)return;i.value=!0,await x.createTeam({name:f.value,description:r.value})&&(f.value="",r.value="",v.value=!1,m("team-created")),i.value=!1};return(T,l)=>(u(),B(e(pe),{open:v.value,"onUpdate:open":l[2]||(l[2]=t=>v.value=t)},{default:s(()=>[a(e(ce),{"as-child":""},{default:s(()=>[F(T.$slots,"default",{},()=>[a(e(b),null,{default:s(()=>[a(e(L),{class:"mr-2 h-4 w-4"}),l[3]||(l[3]=n(" Add Team "))]),_:1})],!0)]),_:3}),a(e(re),{class:"sm:max-w-[425px]"},{default:s(()=>[a(e(ue),null,{default:s(()=>[a(e(me),null,{default:s(()=>l[4]||(l[4]=[n("Add New Team")])),_:1}),a(e(fe),null,{default:s(()=>l[5]||(l[5]=[n(" Create a new team by providing a name and description. ")])),_:1})]),_:1}),o("form",{onSubmit:M(y,["prevent"])},[o("div",Te,[o("div",we,[a(e(S),{for:"teamName",class:"text-right"},{default:s(()=>l[6]||(l[6]=[n(" Team Name ")])),_:1}),a(e(ve),{id:"teamName",modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=t=>f.value=t),placeholder:"Enter team name",class:"col-span-3",required:"",disabled:i.value},null,8,["modelValue","disabled"])]),o("div",ye,[a(e(S),{for:"description",class:"text-right"},{default:s(()=>l[7]||(l[7]=[n(" Description ")])),_:1}),a(e(ge),{id:"description",modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=t=>r.value=t),placeholder:"Enter team description",class:"col-span-3",disabled:i.value},null,8,["modelValue","disabled"])])]),a(e(_e),null,{default:s(()=>[a(e(b),{type:"submit",disabled:i.value},{default:s(()=>[i.value?(u(),_("span",Ce)):R("",!0),n(" "+p(i.value?"Creating...":"Create Team"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:3},8,["open"]))}}),V=$e(ke,[["__scopeId","data-v-882d86e7"]]),De={class:"space-y-6"},Ne={class:"flex items-center justify-between"},Se={class:"space-y-4"},Ve={key:0,class:"text-center py-4"},Ae={key:1,class:"rounded-lg border p-4 text-center"},Be={key:2},Ee={class:"flex justify-end gap-2"},Qe=A({__name:"TeamsList",setup(P){const w=Y(),m=E(),{teams:x,isLoading:f}=q(m),r=c(!1),i=c(null),v=l=>{i.value=l,r.value=!0},y=async()=>{if(!i.value)return;await m.deleteTeam(i.value.id)&&(r.value=!1,i.value=null)};z(()=>{m.loadTeams()});const T=l=>{try{const t=new Date(l);return xe(t,"PPp")}catch(t){return console.error("Error formatting date:",t),"Invalid date"}};return(l,t)=>{const j=O("router-link");return u(),_("div",De,[a(e(J),null,{default:s(()=>[a(e(K),null,{default:s(()=>[o("div",Ne,[o("div",null,[a(e(W),null,{default:s(()=>t[2]||(t[2]=[n("Teams")])),_:1}),a(e(X),null,{default:s(()=>t[3]||(t[3]=[n(" Groups of users that have common dashboard and permission needs ")])),_:1})]),a(V,{onTeamCreated:e(m).loadTeams},null,8,["onTeamCreated"])])]),_:1}),a(e(Q),null,{default:s(()=>[o("div",Se,[t[13]||(t[13]=o("div",{class:"relative"},[o("input",{type:"text",placeholder:"Search teams...",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})],-1)),e(f)?(u(),_("div",Ve," Loading teams... ")):e(x).length===0?(u(),_("div",Ae,[t[5]||(t[5]=o("p",{class:"text-muted-foreground mb-4"},"No teams found",-1)),a(V,{onTeamCreated:e(m).loadTeams},{default:s(()=>[a(e(b),null,{default:s(()=>[a(e(L),{class:"mr-2 h-4 w-4"}),t[4]||(t[4]=n(" Create Your First Team "))]),_:1})]),_:1},8,["onTeamCreated"])])):(u(),_("div",Be,[a(e(oe),null,{default:s(()=>[a(e(ie),null,{default:s(()=>[a(e(N),null,{default:s(()=>[a(e(g),{class:"w-[200px]"},{default:s(()=>t[6]||(t[6]=[n("Name")])),_:1}),a(e(g),{class:"w-[300px]"},{default:s(()=>t[7]||(t[7]=[n("Description")])),_:1}),a(e(g),{class:"w-[100px]"},{default:s(()=>t[8]||(t[8]=[n("Members")])),_:1}),a(e(g),{class:"w-[150px]"},{default:s(()=>t[9]||(t[9]=[n("Created At")])),_:1}),a(e(g),{class:"w-[100px] text-right"},{default:s(()=>t[10]||(t[10]=[n("Actions")])),_:1})]),_:1})]),_:1}),a(e(de),null,{default:s(()=>[(u(!0),_(I,null,G(e(x),d=>(u(),B(e(N),{key:d.id},{default:s(()=>[a(e($),null,{default:s(()=>[a(j,{to:{name:"TeamSettings",params:{id:d.id}},class:"font-medium hover:underline flex items-center gap-2"},{default:s(()=>[n(p(d.name),1)]),_:2},1032,["to"])]),_:2},1024),a(e($),null,{default:s(()=>[n(p(d.description),1)]),_:2},1024),a(e($),null,{default:s(()=>[n(p(d.memberCount),1)]),_:2},1024),a(e($),null,{default:s(()=>[n(p(T(d.created_at)),1)]),_:2},1024),a(e($),{class:"text-right"},{default:s(()=>[o("div",Ee,[a(e(C),null,{default:s(()=>[a(e(k),{asChild:""},{default:s(()=>[a(e(b),{variant:"ghost",size:"icon",onClick:U=>e(w).push({name:"TeamSettings",params:{id:d.id}})},{default:s(()=>[a(e(H),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024),a(e(D),null,{default:s(()=>t[11]||(t[11]=[o("p",null,"Edit team settings",-1)])),_:1})]),_:2},1024),a(e(C),null,{default:s(()=>[a(e(k),{asChild:""},{default:s(()=>[a(e(b),{variant:"destructive",size:"icon",onClick:U=>v(d)},{default:s(()=>[a(e(be),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024),a(e(D),null,{default:s(()=>t[12]||(t[12]=[o("p",null,"Delete team",-1)])),_:1})]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]))])]),_:1})]),_:1}),a(e(Z),{open:r.value,"onUpdate:open":t[1]||(t[1]=d=>r.value=!1)},{default:s(()=>[a(e(h),null,{default:s(()=>[a(e(ee),null,{default:s(()=>[a(e(ae),null,{default:s(()=>t[14]||(t[14]=[n("Delete Team")])),_:1}),a(e(se),{class:"space-y-2"},{default:s(()=>{var d;return[o("p",null,'Are you sure you want to delete team "'+p((d=i.value)==null?void 0:d.name)+'"?',1),t[15]||(t[15]=o("p",{class:"font-medium text-destructive"}," This action cannot be undone. ",-1))]}),_:1})]),_:1}),a(e(te),null,{default:s(()=>[a(e(le),{onClick:t[0]||(t[0]=d=>r.value=!1)},{default:s(()=>t[16]||(t[16]=[n(" Cancel ")])),_:1}),a(e(ne),{onClick:y,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:s(()=>t[17]||(t[17]=[n(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])}}});export{Qe as default};
