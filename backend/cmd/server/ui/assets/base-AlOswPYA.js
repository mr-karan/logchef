import{ae as p,R as l}from"./index-DhD1Jy6j.js";import{i as R,T as d,g}from"./types-ByjhqKv5.js";function h(a){return{data:l(a),isLoading:l(!1),error:l(null)}}async function w(a){const{apiCall:t,onSuccess:o,onError:e,successMessage:n,errorMessage:i,showToast:s=!0}=a,{toast:u}=p();try{const r=await t();if(R(r)){const f=i||r.data.error;return s&&u({title:"Error",description:f,variant:"destructive",duration:d.ERROR}),e==null||e(f),{success:!1}}s&&n&&u({title:"Success",description:n,duration:d.SUCCESS});const c=o==null?void 0:o(r.data);return{success:!0,data:r.data,result:c}}catch(r){const c=i||g(r);return s&&u({title:"Error",description:c,variant:"destructive",duration:d.ERROR}),e==null||e(c),{success:!1}}}function S(a){const t=h(a);return{...t,withLoading:async(e,n={})=>{const{setError:i=!0}=n;try{return t.isLoading.value=!0,i&&(t.error.value=null),await e()}catch(s){throw i&&(t.error.value=g(s)),s}finally{t.isLoading.value=!1}}}}export{w as h,S as u};
