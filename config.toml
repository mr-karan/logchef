# LogChef configuration (TOML).
#
# This file contains only essential bootstrap settings required to start LogChef.
# Runtime settings (AI, alerts, auth sessions, server frontend URL) are managed
# in the Admin UI and stored in the database.
#
# Values can be overridden via environment variables prefixed with LOGCHEF_.
# Use double underscores for nesting: LOGCHEF_SERVER__PORT=8125.

# -----------------------------------------------------------------------------
# Server (required)
# -----------------------------------------------------------------------------
[server]
# HTTP API port.
port = 8125
# Bind address (0.0.0.0 listens on all interfaces).
host = "0.0.0.0"
# HTTP server request timeout.
http_server_timeout = "30s"
# Frontend URL for auth redirects and UI links is managed in the Admin UI.
# For first boot with a separate frontend origin, set LOGCHEF_SERVER__FRONTEND_URL.

# -----------------------------------------------------------------------------
# SQLite (required)
# -----------------------------------------------------------------------------
[sqlite]
# Path to the SQLite database file (relative to the working directory).
path = "local.db"

# -----------------------------------------------------------------------------
# OpenID Connect (OIDC) (required)
# -----------------------------------------------------------------------------
[oidc]
# OIDC provider discovery URL.
provider_url = "http://localhost:5556/dex"
# Explicit auth/token endpoints (required even when discovery is available).
auth_url = "http://localhost:5556/dex/auth"
token_url = "http://localhost:5556/dex/token"
# OIDC client credentials for the web UI login flow.
client_id = "logchef"
# Dev-only secret. Replace this in production.
client_secret = "logchef-secret"
# CLI client ID for CLI authentication (public OIDC client, PKCE flow).
# The OIDC provider must allow loopback redirects:
# http://127.0.0.1:19876/callback ... 19878/callback
cli_client_id = "logchef-cli"
# Callback URL for OIDC authentication (must match provider config).
redirect_url = "http://localhost:8125/api/v1/auth/callback"
# OIDC scopes to request.
scopes = ["openid", "email", "profile"]

# -----------------------------------------------------------------------------
# Authentication (required)
# -----------------------------------------------------------------------------
[auth]
# Admin email addresses (required).
admin_emails = ["admin@logchef.internal"]
# Secret key for API token hashing (required; generate with: openssl rand -hex 32).
# Dev-only value. Replace this in production.
api_token_secret = "5679649c50fddda837449b77d9983ab5f8dba65878897e968a74e7061bf47677"
